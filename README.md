# Strudel Sounds

####  *A list of songs that I have made so farrr*

</br>

Unfortunately, a web browser can't store songs very well :(

... luckily, I can store them here :)

</br>

## About Strudel

[Strudel](https://strudel.cc/) is this a tool I use to make music by typing code into a browser. Instead of using traditional music software, you write small patterns that become beats and melodies in real time. No downloads nor setup is necessary, you can just open the page and start playing around. Strudel based on TidalCycles but written with Javascript, aand is very accessible to all who want a unique way of making music

</br>

## Featured Tracks

| Song                                         | Strudel Link                                           | Source                                                                                   |
|-------------------------------------------------|-------------------------------------------|-------------------------------------------|
| Bass Dohl (drum loop)             | [View on Strudel](https://strudel.cc/#Ly8gQmFzcyBEb2hsIAoKc2V0Y3BtKDMyKQoKCnN0YWNrKAogIC8vIEtraWNrCiAgc291bmQoImJkIH4gfiB%2BIH4gfiB%2BIH4gYmQgfiB%2BIH4gfiB%2BIH4gfiIpCiAgICAuYmFuaygiUm9sYW5kVFI4MDgiKQogICAgLmdhaW4oMSksCgogIC8vICBtaWQgcGVyY3Vzc2lvbiBncm91cGVkIAogIHNvdW5kKCJbfiB%2BIFtyaW0sIHNkLCBjcF0gc2QgW2x0LCBtdF0gfiBbbHQsIG10XSB%2BXSoyIikKICAgIC5iYW5rKCJSb2xhbmRUUjgwOCIpCiAgICAuZ2FpbigwLjcpLAoKICAvLyBzaGFrZXJzCiAgc291bmQoInNoIH4gfiB%2BIH4gc2ggc2ggc2ggc2ggfiB%2BIH4gfiBzaCBzaCBzaCIpCiAgICAuYmFuaygiUm9sYW5kVFI4MDgiKQogICAgLmdhaW4oMC4zKSwKCiAgLy8gdm9pY2UKICBzb3VuZCgiW2Nyb3cgfiA8Y3JvdyB%2BPiB%2BITVdKjIiKQogICAgLmxwZigiMTgwMCIpCiAgICAuZ2FpbigwLjUpCiAgICAudHJlbW9sbygxKQogICAgLnRyZW1vbG9kZXB0aCgwLjgpCiAgICAudHJlbW9sb3NoYXBlKCJzaW5lIikKICAgIC5zcGVlZCgiWzwxLjYgMS41NT4gfiA8MS42NSB%2BPiB%2BITVdKjIiKQoKKQ%3D%3D)     | [Github file](https://github.com/maiasullivan/strudel_sounds/blob/main/bass_dhol_drums.str) | 
| Dance Dance Revolution            | [View on Strudel](https://strudel.cc/#c2V0Y3BzKDE2KQoKJDogbm90ZShgCjxhIGMgZSBkIApjIGEgZyBhIAphIGMgZSBkIApjIGEgZyBlIAplIGcgYSBjIAphIGcgZSBkIApjIGQgZSBnIAphIGcgYSBnID5gKQogIC5zY2FsZSgiZzptaW5vciIpCiAgLnNsb3coMikKICAub2N0YXZlKDEpCiAgLnRyYW5zKC0xMikKICAuc291bmQoInNxdWFyZSIpCiAgLmxwZigiMTIwMCIpCgokOiBub3RlKCJjIikKICAuZGV0dW5lKHJhbmQpCiAgLnNjYWxlKCJnOm1pbm9yIikKICAuc2xvdygyKQogIC5vY3RhdmUoMikKICAudHJhbnMoLTI0KQogIC5zb3VuZCgic3VwZXJzYXciKQogIC5nYWluKCIwLjQiKQogIC5scGYoIjEwMDAiKQogIAoKJDogcygiYmQ6MiE0IikKICAuZHVjaygiMzo0OjU6NiIpCiAgLmR1Y2tkZXB0aCguOCkKICAuZHVja2F0dGFjayguMTYpCiAgLnNsb3coMzIpCiAgLl9zY29wZSgp)    | [Github file](https://github.com/maiasullivan/strudel_sounds/blob/main/dance_dance_revolution.str) | 
| Harmonious ambient shambient            | [View on Strudel](https://strudel.cc/#Ci8vIEhhcm1vbmlvdXMgYW1iaWVudCBzaGFtYmllbnQgc29uZwovLyBCeSBtYWlhX3N1bGxpdmFuCi8vCi8vIEZvciBiZXN0IGVmZmVjdHM6IHNsb3dseXl5eXkgaW5jcmVhc2UgdGhlIHNsaWRlcgovLyBQYXN0ZSBgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiY2FudmFzIikuZm9yRWFjaChjID0%2BIGMuc3R5bGUub3BhY2l0eSA9IOKAnDAuM2AgaW50byBicm93c2VyIGNvbnNvbGUgdG8gc2VlIGNvZGUgYWJvdmUgdGhlIHZpc3VhbHMKCnNldGNwbSgzMCkKbGV0IGEgPShzbGlkZXIoMC43LCAwLjcsIDEuMCkpCnN0YWNrKAogIHN0YWNrKAogICAgIHMoImJkIGJkIGJkIFtiZCBiZC8yXSIpLmJhbmsoImNvbmNlcnRtYXRlbWcxIikuZGVsYXkoIjEuNSIpLmdhaW4oYSksCiAgICAgbigiWzEgNCA1IDJdLCBbMyoxNl0iKS5zY2FsZSgiZzptaW5vciIpLnNvdW5kKCJ3aW5kIikudHJhbnMoLTI0KS5scGYoYS5tdWwoMzAwKS5hZGQoNTAwKSkucm9vbSguMiksCiAgICAgcygiPGhoIGhoIGhoIC0vMiBiZC80PioxNiIpLmRlbGF5KCIxIDIiKS5scGYoIjE1MDAgMjAwMCAyMDAwMCIpLAogICksCiBzdGFjaygKICAgIG4oIjAsMyw3LCAxMy80IikuZ2FpbihhLm11bCgwLjUpKSwKICAgIG4oIjw5IC0gNCAtPiIpLnN1c3RhaW4oIjwyIC0gMiAtPiIpLmdhaW4oYS5tdWwoMC45KSkKICApLnNjYWxlKCJlOm1pbm9yIikucygic2F3dG9vdGgiKS5scGYoYS5tdWwoMTA2NjcpLmFkZCgtNjY2NykpLnBoKCI8MSAyIDQgMz4iKS5kZWxheSguNSkucm9vbSgxLjUpLAogcygic2QgW3NkIHNkKjJdIHNkIHNkIikuYmFuaygidHI1MDUiKS5kZWxheSgiLjQiKS5scGYoYS5tdWwoMTA2NjcpLmFkZCgtNjY2NykpCikucHVuY2hjYXJkKCk%3D) | [Github file](https://github.com/maiasullivan/strudel_sounds/blob/main/harmoniuous_ambient_shambient.js) | 
| Daft-Punk inspired | [View on Strudel](https://strudel.cc/#CnNldGNwcygxMTYvNjAvNCkKCiQ6IHNvdW5kKCJiZCBiZCBiZCBiZCIpCiAgLmJhbmsoIlJvbGFuZFRSODA4IikKICAuZ2FpbigxLjEpCgokOiBzb3VuZCgifiBjcCB%2BIGNwIikKICAuYmFuaygiUm9sYW5kVFI4MDgiKQogIC5nYWluKDAuODUpCiAgLmRlbGF5KDAuMSkuZGVsYXl0aW1lKDAuMjUpLmRlbGF5ZmVlZGJhY2soMC4yKQoKJDogc291bmQoImhoKjgiKQogIC5iYW5rKCJSb2xhbmRUUjgwOCIpCiAgLmdhaW4oIjAuNSAwLjMgMC42IDAuMyAwLjU1IDAuMjUgMC43IDAuMyIpCiAgLnBhbihzaW5lLnJhbmdlKDAuMywgMC43KS5zbG93KDQpKQoKJDogbm90ZSgiPGIxIGIxIH4gYjEgZDIgZDIgfiB%2BIGZzMSBmczEgfiBmczEgZTEgfiBlMSB%2BPiIpCiAgLnNvdW5kKCJzYXd0b290aCIpCiAgLmxwZig0MDApCiAgLmxwcSg4KQogIC5nYWluKDAuOSkKICAuYXR0YWNrKDAuMDEpCiAgLnJlbGVhc2UoMC4xOCkKCiQ6IG5vdGUoIjxbYjMsZDQsZiM0LGE0XSEyIH4gW2IzLGQ0LGYjNCxhNF0gfiBbZDQsZiM0LGE0XSEyIH4gW2Q0LGYjNCxhNF0gfiBbZiMzLGEzLGMjNCxlNF0hMiB%2BIH4gW2YjMyxhMyxjIzQsZTRdIFtlMyxnIzMsYjNdIH4gW2UzLGcjMyxiM10gfj4iKQogIC5zb3VuZCgic2F3dG9vdGgiKQogIC5scGYoMTgwMCkKICAubHBxKDMpCiAgLmdhaW4oMC41NSkKICAuYXR0YWNrKDAuMDA1KQogIC5yZWxlYXNlKDAuMDgpCiAgLnBhbigwLjQpCgokOiBub3RlKCI8YjQgfiBiNCBhNCA6IGYjNCB%2BIGYjNCBlNCA6IGQ0IH4gZDQgZiM0IDogZTQgfiB%2BIGI0PiIpCiAgLnNvdW5kKCJzcXVhcmUiKQogIC5scGYoMjIwMCkKICAubHBxKDYpCiAgLmdhaW4oMC42KQogIC52aWJyYXRvKDQsIDAuMDEpCiAgLmRlbGF5KDAuMykuZGVsYXl0aW1lKDAuMzc1KS5kZWxheWZlZWRiYWNrKDAuMzUpCiAgLnBhbigwLjYpCgokOiBub3RlKCI8W2IyLGYjMyxhM10gW2QzLGYjMyxhM10gW2YjMixhMixjIzNdIFtlMixnIzIsYjJdPiIpCiAgLnNvdW5kKCJzaW5lIikKICAuZ2FpbigwLjM1KQogIC5hdHRhY2soMC4zKQogIC5yZWxlYXNlKDEuMikKICAubHBmKHNpbmUucmFuZ2UoNjAwLCAyNDAwKS5zbG93KDgpKQogIC5wYW4oMC4yNSkKCiQ6IG5vdGUoIjx%2BIFtiMyxkNCxmIzRdIH4gfiA6IH4gfiBbZDQsZiM0LGE0XSB%2BIDogfiBbZiMzLGEzLGMjNF0gfiBbZiMzLGEzLGMjNF0gOiB%2BIH4gfiBbZTMsZyMzLGIzXT4iKQogIC5zb3VuZCgic2F3dG9vdGgiKQogIC5scGYoMzAwMCkKICAuZ2FpbigwLjQ1KQogIC5hdHRhY2soMC4wMDEpCiAgLnJlbGVhc2UoMC4wNCkKICAucGFuKDAuNykK) | [Github file](https://github.com/maiasullivan/strudel_sounds/blob/main/paft_dunk.str) |
| Breakcore attempt 1 | [View on Strudel](https://strudel.cc/#Ly9UT0RPOiBmaW5kIGEgYmV0dGVyIHdheSB0byBkbyB0aGlzCndpbmRvdy5yZWdpc3RlckZ1bmMgPSAobmFtZSwgZnVuYykgPT4gewogIC8vZW5zdXJlcyBpdCB3aWxsIHdvcmsgaW4gbW9uZG8gbm90YXRpb24KICBzdHJ1ZGVsU2NvcGVbbmFtZV0gPSBmdW5jCiAgLy9lbnN1cmVzIGl0IHdpbGwgd29yayBpbiBtaW5pIG5vdGF0aW9uCiAgd2luZG93W25hbWVdID0gZnVuYwp9Cgp3aW5kb3cuRFggPSAoZW52PTgsIGZtID0gMiwgaGFybSA9IDIpID0%2BIHMoInNpbmUiKQogIC5mbShmbSkuZm1lbnYoZW52KS5mbWgoaGFybSkuZm1kZWNheSguMikKCi8vIHRiMzAzIHN0eWxlIGZpbHRlciBlbnZlbG9wZSBjb250cm9sIGJldHdlZW4gMCAmIDEgdmFsdWVzIGZvciB1c2VmdWwgcmFuZ2UKcmVnaXN0ZXIoJ2FjaWRlbnYnLCAoeCwgcGF0KSA9PiBwYXQubHBmKDEwMCkKICAubHBlbnYoeCAqIDkpLmxwcyguMikubHBkKC4xMikubHBxKDIpCikKCnNldEdhaW5DdXJ2ZSh4ID0%2BIE1hdGgucG93KHgsIDIpKQoKd2luZG93LnNvbG9lZE9yYml0cyA9IFtdCndpbmRvdy5zb2xvT3JiaXQgPSAoLi4ub3JiaXRzKSA9PiB7CiAgd2luZG93LnNvbG9lZE9yYml0cyA9IG9yYml0cwp9CndpbmRvdy5tdXRlZE9yYml0cyA9IFtdCndpbmRvdy5zb2xvID0gKC4uLm9yYml0cykgPT4gewogIHdpbmRvdy5zb2xvZWRPcmJpdHMgPSBvcmJpdHMKfQp3aW5kb3cubXV0ZSA9ICguLi5vcmJpdHMpID0%2BIHsKICB3aW5kb3cubXV0ZWRPcmJpdHMgPSBvcmJpdHMKfQpyZWdpc3RlcignbycsIChvcmJpdCwgcGF0KSA9PiB7CiAgcGF0ID0gcGF0Lm9yYml0KG9yYml0KQogIGlmIChtdXRlZE9yYml0cy5pbmNsdWRlcyhvcmJpdCkpIHsKICAgIHJldHVybiBwYXQuaHVzaCgpCiAgfQogIGlmICghc29sb2VkT3JiaXRzLmxlbmd0aCB8fCBzb2xvZWRPcmJpdHMuaW5jbHVkZXMob3JiaXQpKSB7CiAgICByZXR1cm4gcGF0CiAgfQogIHJldHVybiBwYXQuaHVzaCgpCiAgCn0pCgovL3RyYWNrZXIgc3R5bGUgYXJyYW5nZW1lbnQKd2luZG93LnRyYWNrID0gZnVuY3Rpb24oLi4uaW5wdXQpIHsKICBjb25zdCBwYXR0ZXJucyA9IGlucHV0LnNoaWZ0KCkKICBsZXQgbW9kcyA9IEFycmF5LmlzQXJyYXkoaW5wdXQuYXQoLTEpKSA%2FIGlucHV0LnBvcCgpIDogdW5kZWZpbmVkCiAgaWYgKGlucHV0Lmxlbmd0aCAlIDIgIT09IDApIHsKICAgIHRocm93IG5ldyBFcnJvcignQXJyYW5nZSBuZWVkcyBhIGxlbmd0aCBwYXJhbXRlciBmb3IgZWFjaCBwYXR0ZXJuIChsZW5ndGgsIHBhdHRlcm4sIGxlbmd0aCwgcGF0dGVybiknKTsKICB9CiAgbGV0IHNlY3RzID0gW107CiAgbGV0IHRvdGFsID0gMDsKICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSArPSAyKSB7CiAgICBsZXQgaW5wID0gW2lucHV0LmF0KGkpXS5mbGF0KCkKICAgIGxldCBjeWNsZXMgPSBpbnAuYXQoMCk7CiAgICBsZXQgc3RhcnQgPSBpbnAuYXQoMSkgPz8gMAogICAgCiAgICB0b3RhbCArPSBjeWNsZXM7CiAgICAKICAgIGxldCBjcGF0ID0gaW5wdXQuYXQoaSArIDEpLmlubmVyQmluZCgoc3RyLCBwYXQpID0%2BIHsKCiAgICAgIGNvbnN0IHBhdHMgPSBbXQogICAgICBzdHIuc3BsaXQoLy0rLykuZm9yRWFjaCgodmFsLCBpbmRleCkgPT4gewogICAgICAgIGlmICh2YWwgPT0gZmFsc2UgKXsKICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgbGV0IG5ld1BhdCA9IHBhdHRlcm5zLmF0KGluZGV4KQogICAgICAgICBtb2RzPy5mb3JFYWNoKChbbW9kLCBjYWxsYmFja10pID0%2BIHsKICAgICAgICAgICAgaWYgKHZhbCAhPSBtb2QpIHsKICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICBuZXdQYXQgPSBjYWxsYmFjayhuZXdQYXQpCiAgICAgICAgIH0pCiAgICAgICAgCiAgICAgICAgICBwYXRzLnB1c2gobmV3UGF0KQogICAgICB9KQogICAgICByZXR1cm4gc3RhY2soLi4ucGF0cykKICAgIH0pOwogICAKICAgIHNlY3RzLnB1c2goW2N5Y2xlcywgY3BhdC5yaWJib24oc3RhcnQsIGN5Y2xlcykuZmFzdChjeWNsZXMpXSk7CiAgfQogIHJldHVybiBzdGVwY2F0KC4uLnNlY3RzKS5zbG93KHRvdGFsKTsKfQovKioKJDogdHJhY2soCiAgIFtiZCwgICAgIHNkLCAgICAgaGF0LCAgICBjbGFwLCAgICBiYXNzXSwgCiAyLCAiLS0tLS0tLS0wLS0tLS0tMS0tLS0tLS0xLS0tLS0tLS0wIiwKIDIsICIxLS0tLS0tLTAtLS0tLS0xLS0tLS0tLUQtLS0tLS0tLTAiLAogNCwgIjEtLS0tLS0tMC0tLS0tLTEtLS0tLS0tMS0tLS0tLS0tMSIsCiAgW1snRCcgLCh4KSA9PiB4LmRlbGF5KC41KV1dIC8vT3B0aW9uYWwgbW9kaWZpZXJzCikKKi8KCgovKioKICogUXVpY2sgQXJyYW5nZQogKiBBbGxvd3MgdG8gYXJyYW5nZSBtdWx0aXBsZSBwYXR0ZXJucyB0b2dldGhlciBvdmVyIG11bHRpcGxlIGN5Y2xlcy4KICogVGFrZXMgYSB2YXJpYWJsZSBudW1iZXIgb2YgYXJyYXlzIHdpdGggdHdvIGVsZW1lbnRzIHNwZWNpZnlpbmcgdGhlIG51bWJlciBvZiBjeWNsZXMgYW5kIHRoZSBwYXR0ZXJuIHRvIHVzZS4KICoKICogQHJldHVybiB7UGF0dGVybn0KICogQGV4YW1wbGUKICogYXIoCiAqICAgNCwgIjxjIGEgZiBlPigzLDgpIiwKICogICAyLCAiPGcgYT4oNSw4KSIKICogKS5ub3RlKCkKICovCndpbmRvdy5hciA9IGZ1bmN0aW9uKC4uLmlucHV0KSB7CgogIGlmIChpbnB1dC5sZW5ndGggJSAyICE9PSAwKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0FycmFuZ2UgbmVlZHMgYSBsZW5ndGggcGFyYW10ZXIgZm9yIGVhY2ggcGF0dGVybiAobGVuZ3RoLCBwYXR0ZXJuLCBsZW5ndGgsIHBhdHRlcm4pJyk7CiAgfQogIGxldCBzZWN0cyA9IFtdOwogIGxldCB0b3RhbCA9IDA7CiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMikgewogICAgbGV0IGlucCA9IFtpbnB1dC5hdChpKV0uZmxhdCgpCiAgICBsZXQgY3ljbGVzID0gaW5wLmF0KDApOwogICAgbGV0IHN0YXJ0ID0gaW5wLmF0KDEpID8%2FIDAKICAgIHRvdGFsICs9IGN5Y2xlczsKICAgIAogICAgbGV0IHBhdHRlcm4gPSBpbnB1dC5hdChpICsgMSk7CiAgICBzZWN0cy5wdXNoKFtjeWNsZXMsIHBhdHRlcm4ucmliYm9uKHN0YXJ0LCBjeWNsZXMpLmZhc3QoY3ljbGVzKV0pOwogIH0KICByZXR1cm4gc3RlcGNhdCguLi5zZWN0cykuc2xvdyh0b3RhbCk7Cn0KCgp3aW5kb3cucCA9IHN0YWNrCgp3aW5kb3cuYmxvY2tBcnJhbmdlID0gZnVuY3Rpb24gKHBhdEFyciwgbW9kaWZpZXJzID0gW10pIHsKICByZXR1cm4gc3RhY2soCiAgICAuLi5wYXRBcnIubWFwKChbcGF0LCBtYXNrUGF0XSkgPT4gewogICAgICBwYXQgPSBbcGF0XS5mbGF0KCkKCiAgICAgIHJldHVybiBtYXNrUGF0LmZtYXAobSA9PiB7CiAgICAgICAgcmV0dXJuIHN0YWNrKC4uLnBhdC5tYXAocCA9PiB7CgogICAgICAgICAgaWYgKG0gPT0gMCkgewogICAgICAgICAgICByZXR1cm4KICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IG1zID0gbS50b1N0cmluZygpCiAgICAgICAgICBsZXQgbmV3UGF0ID0gcAoKICAgICAgICAgIGlmIChtcy5pbmNsdWRlcygnUicpKSB7CiAgICAgICAgICAgIG5ld1BhdCA9IG5ld1BhdC5yZXN0YXJ0KDEpCiAgICAgICAgICB9CiAgICAgICAgICBpZiAobXMuaW5jbHVkZXMoJ0InKSkgewogICAgICAgICAgICBuZXdQYXQgPSBuZXdQYXQucmV2KCkuc3BlZWQoLTEpCiAgICAgICAgICB9CiAgICAgICAgICBtb2RpZmllcnMuZm9yRWFjaCgoW21vZCwgY2FsbGJhY2tdKSA9PiB7CiAgICAgICAgICAgIGlmIChtb2QobXMpKSB7CiAgICAgICAgICAgICAgbmV3UGF0ID0gY2FsbGJhY2sobmV3UGF0KQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgcmV0dXJuIG5ld1BhdAogICAgICAgIH0pLmZpbHRlcihCb29sZWFuKSkKICAgICAgfSkuaW5uZXJKb2luKCkKICAgIH0pLmZsYXQoKQogICkKfQoKLy8gZXhhbXBsZToKLy8gJDogYmxvY2tBcnJhbmdlKAovLyAgICAgWyAKLy8gICAgICAgW1tiZF0sICAgICAgICI8RiBGIEYgRiBGIEYgRiBGIEYgMD4iXSwKLy8gICAgICAgW1tiYXNzXSwgICAgICI8MCAwIEYgRiBGIFMgRiBGIEYgQj4iXSwKLy8gICAgICAgW1toYXRdLCAgICAgICI8MCBGIEYgRiBGIEYgRiBGIEYgRj4iXSwgICAgCi8vICAgICBdLAovLyAgICAgLy9BREQgQ1VTVE9NIEJJTkRJTkdTCi8vICAgICBbWyhtKSA9PiBtLmluY2x1ZGVzKCdTJykgLCAoeCkgPT4geC5zdHJldGNoKDEpXV0KLy8gICApLl9zY29wZSgpCgovLyBmaWxsIGluIGdhcHMgYmV0d2VlbiBldmVudHMKcmVnaXN0ZXIoJ2ZpbGwnLCBmdW5jdGlvbiAocGF0KSB7CiAgcmV0dXJuIG5ldyBQYXR0ZXJuKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgY29uc3QgbG9va2JvdGh3YXlzID0gMTsKICAgIC8vIEV4cGFuZCB0aGUgcXVlcnkgd2luZG93CiAgICBjb25zdCBoYXBzID0gcGF0LnF1ZXJ5KHN0YXRlLndpdGhTcGFuKHNwYW4gPT4gbmV3IFRpbWVTcGFuKHNwYW4uYmVnaW4uc3ViKGxvb2tib3Rod2F5cyksIHNwYW4uZW5kLmFkZChsb29rYm90aHdheXMpKSkpOwogICAgY29uc3Qgb25zZXRzID0gaGFwcy5tYXAoaGFwID0%2BIGhhcC53aG9sZS5iZWdpbikKICAgICAgLy8gc29ydCBmcmFjdGlvbnMKICAgICAgLnNvcnQoKGEsIGIpID0%2BIGEuY29tcGFyZShiKSkKICAgICAgLy8gbWFrZSB1bmlxdWUKICAgICAgLmZpbHRlcigoeCwgaSwgYXJyKSA9PiBpID09IChhcnIubGVuZ3RoIC0gMSkgfHwgeC5uZShhcnJbaSArIDFdKSk7CiAgICBjb25zdCBuZXdIYXBzID0gW107CiAgICBmb3IgKGNvbnN0IGhhcCBvZiBoYXBzKSB7CiAgICAgIC8vIEluZ29yZSBpZiB0aGUgcGFydCBzdGFydHMgYWZ0ZXIgdGhlIG9yaWdpbmFsIHF1ZXJ5CiAgICAgIGlmIChoYXAucGFydC5iZWdpbi5ndGUoc3RhdGUuc3Bhbi5lbmQpKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIC8vIEZpbmQgdGhlIG5leHQgb25zZXQsIHRvIHVzZSBhcyBhbiBvZmZzZXQKICAgICAgY29uc3QgbmV4dCA9IG9uc2V0cy5maW5kKG9uc2V0ID0%2BIG9uc2V0Lmd0ZShoYXAud2hvbGUuZW5kKSk7CgogICAgICAvLyBJZiB0aGVyZSBpcyBubyBuZXh0IG9uc2V0LCB0aGUgcXVlcnkgd2luZG93IGlzIG5vdCBsYXJnZSBlbm91Z2guCiAgICAgIC8vIFdlIGJhaWwgb3V0IHRvIGF2b2lkIGEgY3Jhc2guCiAgICAgIGlmIChuZXh0ID09PSB1bmRlZmluZWQpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgLy8gSWdub3JlIGlmIHRoZSBwYXJ0IGVuZGVkIGJlZm9yZSB0aGUgb3JpZ2luYWwgcXVlcnksIGFuZCBoYXNuJ3QgZXhwYW5kZWQgaW5zaWRlCiAgICAgIGlmIChuZXh0Lmx0ZShzdGF0ZS5zcGFuLmJlZ2luKSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBjb25zdCB3aG9sZSA9IG5ldyBUaW1lU3BhbihoYXAud2hvbGUuYmVnaW4sIG5leHQpOwogICAgICAvLyBDb25zdHJhaW4gcGFydCB0byBvcmlnaW5hbCBxdWVyeQogICAgICBjb25zdCBwYXJ0ID0gbmV3IFRpbWVTcGFuKGhhcC5wYXJ0LmJlZ2luLm1heChzdGF0ZS5zcGFuLmJlZ2luKSwgbmV4dC5taW4oc3RhdGUuc3Bhbi5lbmQpKTsKICAgICAgbmV3SGFwcy5wdXNoKG5ldyBIYXAod2hvbGUsIHBhcnQsIGhhcC52YWx1ZSwgaGFwLmNvbnRleHQsIGhhcC5zdGF0ZWZ1bCkpOwogICAgfQogICAgcmV0dXJuIG5ld0hhcHM7CiAgfSk7Cn0pOwoKcmVnaXN0ZXIoJ3RyYW5jZWdhdGUnLCAoZGVuc2l0eSwgc2VlZCwgbGVuZ3RoLCB4KSA9PiB7CiAgZGVuc2l0eSA9IHJlaWZ5KGRlbnNpdHkpLmFkZCguNSkKICByZXR1cm4geC5zdHJ1Y3QocmFuZC5tdWwoZGVuc2l0eSkucm91bmQoKS5zZWcoMTYpLnJpYihzZWVkLCBsZW5ndGgpKS5maWxsKCkuY2xpcCguNykKfSkKCi8vQmV0dGVyIHRyYW5jZWdhdGUKcmVnaXN0ZXIoJ3RnYXRlJywgKGFtdCwgY3ljbGUsbGVuZ3RoLCBwYXQpID0%2BIHsKICBjb25zdCBjeWNsZVN1YnN0aXR1dGUgPSBuZXcgTWFwKFsKICAgIFswLCA0NV0sCiAgICBbMSwgMTE2XSwKICAgIFsyLCA5OV0sCiAgICBbMywgMTAwXSwKICAgIFs0LCAxMDddLAogICAgWzUsIDUzXSwKICAgIFs2LCA1N10sCiAgICBbNywgNThdLAogICAgWzgsIDY3XSwKICAgIFs5LCA4MV0sCiAgICBbMTAsIDg5XSwKICAgIFsxMSwgMTE1XSwKICAgIFsxMiwgOF0sCiAgICBbMTMsIDExOF0sCiAgICBbMTQsIDEyMF0sCiAgICBbMTUsIDE0NF0sCiAgICBbMTYsIDE0OV0sCiAgICBbMTcsIDE2MV0sCiAgICBbMTgsIDE5N10sCiAgICBbMTksIDIwNl0sCiAgICBbMjAsIDIwOV0sCiAgICBbMjEsIDIzMF0sCiAgICBbMjIsIDI2OV0sCiAgICBbMjMsIDI3NF0sCiAgICBbMjQsIDI5M10sCiAgICBbMjQsIDI5NV0sCiAgICBbMjUsIDMwOF0sCiAgICBbMzEsIDM3XSwKICAgIFszMiwgNDBdLAogICAgWzMzLCA1OV0sCiAgICBbMzQsIDYzXSwKICAgIFszNSwgNjVdLAogICAgWzM2LCA2OF0sCiAgICBbMzcsIDcwXSwKICAgIFszNywgMjI1XSwKICBdKQogIGN5Y2xlID0gcmVpZnkoY3ljbGUpCiAgICAud2l0aFZhbHVlKHYgPT4gewogICAgICBjb25zb2xlLmluZm8odikKICAgIHJldHVybiBjeWNsZVN1YnN0aXR1dGUuZ2V0KHYpID8%2FIHYKICB9KQogIGFtdCA9IHJlaWZ5KGFtdCkKICByZXR1cm4gcGF0LnNlZygxNikuZGVncmFkZUJ5KGFtdC5tdWwoLTEpLmFkZCgxKSkKICAgIC5yaWIoY3ljbGUsbGVuZ3RoKS5maWxsKCkuY2xpcCguNykKfSkKCi8vaW5jcmVhc2luZyB0aGUgZGVsYXkgaW5jcmVhc2VzIHRoZSBmZWVkYmFjayBhcyB3ZWxsCnJlZ2lzdGVyKCdkbHknLCAoYW10LCB4KSA9PnsgCiAgYW10ID0gcmVpZnkoYW10KQogIHJldHVybiAgeC5kZWxheShhbXQubXVsKC44KSkuZGVsYXlmZWVkYmFjayhhbXQucG93KDIpKS5tYXNrKGFtdC5mbG9vcigpLmludigpKSAKfSkKCnJlZ2lzdGVyKCdjb2xvcnBhcnR5JywgKHAsIHBhdCkgPT4gewogY29uc3QgY29sb3JzID0gWydibHVlJywgJ3llbGxvdycsICd2aW9sZXQnLCAnZ3JlZW4nLCAnb3JhbmdlJywgJ2N5YW4nLCAnbWFnZW50YScsICd3aGl0ZSddCiAgIHJldHVybiBwYXQuY29sb3IoY29sb3JzLmF0KE1hdGguZmxvb3IocCAqIGNvbG9ycy5sZW5ndGgpKSkKfSkKCi8vIHF1YW50aXplIG5vdGVzIHRvIGdpdmVuIHZhbHVlczogcGF0LmdyYWIoImU6ZiM6YyIpCnJlZ2lzdGVyKCdncmFiJywgZnVuY3Rpb24gKHNjYWxlLCBwYXQpIHsKICAvLyBTdXBwb3J0cyAnOicgbGlzdCBzeW50YXggaW4gbWluaW5vdGF0aW9uCiAgc2NhbGUgPSAoQXJyYXkuaXNBcnJheShzY2FsZSkgPyBzY2FsZS5mbGF0KCkgOiBbc2NhbGVdKS5mbGF0TWFwKCh2YWwpID0%2BCiAgICB0eXBlb2YgdmFsID09PSAnbnVtYmVyJyA%2FIHZhbCA6IG5vdGVUb01pZGkodmFsKSAtIDQ4CiAgKTsKCiAgcmV0dXJuIHBhdC53aXRoSGFwKChoYXApID0%2BIHsKICAgIGNvbnN0IGlzT2JqZWN0ID0gdHlwZW9mIGhhcC52YWx1ZSA9PT0gJ29iamVjdCc7CiAgICBsZXQgbm90ZSA9IGlzT2JqZWN0ID8gaGFwLnZhbHVlLm4gOiBoYXAudmFsdWU7CiAgICBpZiAodHlwZW9mIG5vdGUgPT09ICdudW1iZXInKSB7CiAgICAgIG5vdGUgPSBub3RlOwogICAgfQogICAgaWYgKHR5cGVvZiBub3RlID09PSAnc3RyaW5nJykgewogICAgICBub3RlID0gbm90ZVRvTWlkaShub3RlKTsKICAgIH0KCiAgICBpZiAoaXNPYmplY3QpIHsKICAgICAgZGVsZXRlIGhhcC52YWx1ZS5uOyAvLyByZW1vdmUgbiBzbyBpdCB3b24ndCBjYXVzZSB0cm91YmxlCiAgICB9CiAgICBjb25zdCBvY3RhdmUgPSAobm90ZSAvIDEyKSA%2BPiAwOwogICAgY29uc3QgdHJhbnNwb3NlID0gb2N0YXZlICogMTI7CgogICAgY29uc3QgZ29hbCA9IG5vdGUgLSB0cmFuc3Bvc2U7CiAgICBub3RlID0KICAgICAgc2NhbGUucmVkdWNlKChwcmV2LCBjdXJyKSA9PiB7CiAgICAgICAgcmV0dXJuIE1hdGguYWJzKGN1cnIgLSBnb2FsKSA8IE1hdGguYWJzKHByZXYgLSBnb2FsKSA%2FIGN1cnIgOiBwcmV2OwogICAgICB9KSArIHRyYW5zcG9zZTsKCiAgICByZXR1cm4gaGFwLndpdGhWYWx1ZSgoKSA9PiAoaXNPYmplY3QgPyB7IC4uLmhhcC52YWx1ZSwgbm90ZSB9IDogbm90ZSkpOwogIH0pOwp9KTsKCnNldERlZmF1bHQoJ2dhaW4nLCAxKQoKLy8gbXVsdGkgb3JiaXQgcGFuIGZvciBxdWFkIHNldHVwcyBldGMuCi8vIGV4OiBzKCJiZCE0IikubXBhbigiMzo0Iiwgc2xpZGVyKDAuNzYxKSkKcmVnaXN0ZXIoJ21wYW4nLCAob3JiaXRzLCBhbW91bnQsIHBhdCkgPT4gewogIGNvbnN0IGluZGV4ID0gTWF0aC5yb3VuZChhbW91bnQgKiAob3JiaXRzLmxlbmd0aCAtIDEpKQogIGNvbnN0IG9yYml0ID0gb3JiaXRzW2luZGV4XQogIGNvbnN0IHBhbXQgPSAoYW1vdW50ICogb3JiaXRzLmxlbmd0aCkgJSAxCiAgcmV0dXJuIHBhdC5vcmJpdChvcmJpdCkucGFuKHBhbXQpCn0pCgovLyBscGYgYmV0d2VlbiAwIGFuZCAxCnJlZ2lzdGVyKCdybHBmJywgKHgsIHBhdCkgPT4geyByZXR1cm4gcGF0LmxwZihwdXJlKHgpLm11bCgxMikucG93KDQpKSB9KQoKLy9ocGYgYmV0d2VlbiAwIGFuZCAxCnJlZ2lzdGVyKCdyaHBmJywgKHgsIHBhdCkgPT4geyByZXR1cm4gcGF0LmhwZihwdXJlKHgpLm11bCgxMikucG93KDQpKSB9KQoKLy9AdGl0bGUgdmVsb2NpdHkgc3RydWN0dXJlIEBieSBTd2l0Y2ggQW5nZWwKcmVnaXN0ZXIoJ3ZzdHJ1Y3QnLCAoaXBhdCxwYXQpID0%2BIHsKICByZXR1cm4gaXBhdC5vdXRlckJpbmQodmVsID0%2BIHsKICAgIHJldHVybiBwYXQua2VlcGlmLm91dChNYXRoLmNlaWwodmVsKSkudmVsb2NpdHkodmVsKQogIH0pCn0sZmFsc2UpCgovLyBzZXRzIG15IEFibGV0b24gdm9jb2RlciBDQyBrZXkgdG8gdGhlIHNwZWNpZmllZCB2YWx1ZSwgcHJvYmFibHkgb25seSB1c2VmdWwgZm9yIG1lCgpyZWdpc3Rlcigndm9jJywgKGtleSwgeCkgPT4gewogIGxldCB2YWx1ZTsKICBzd2l0Y2ggKGtleS50b0xvd2VyQ2FzZSgpKSB7CiAgICBjYXNlICdjJzogdmFsdWUgPSAwOyBicmVhazsKICAgIGNhc2UgJ2MjJzogdmFsdWUgPSAwLjI7IGJyZWFrOwogICAgY2FzZSAnZCc6IHZhbHVlID0gMC4yNTsgYnJlYWs7CiAgICBjYXNlICdkIyc6IHZhbHVlID0gMC4zOyBicmVhazsKICAgIGNhc2UgJ2UnOiB2YWx1ZSA9IDAuNDsgYnJlYWs7CiAgICBjYXNlICdmJzogdmFsdWUgPSAwLjU7IGJyZWFrOwogICAgY2FzZSAnZiMnOiB2YWx1ZSA9IDAuNjsgYnJlYWs7CiAgICBjYXNlICdnJzogdmFsdWUgPSAwLjc7IGJyZWFrOwogICAgY2FzZSAnZyMnOiB2YWx1ZSA9IDAuNzU7IGJyZWFrOwogICAgY2FzZSAnYSc6IHZhbHVlID0gMC44OyBicmVhazsKICAgIGNhc2UgJ2EjJzogdmFsdWUgPSAwLjk7IGJyZWFrOwogICAgY2FzZSAnYic6IHZhbHVlID0gMTsgYnJlYWs7CiAgICBkZWZhdWx0OiB2YWx1ZSA9IDA7IC8vIGZhbGxiYWNrIHZhbHVlIGlmIGtleSBpcyBub3QgcmVjb2duaXplZAogIH0KCiAgcmV0dXJuIHguY2NuKDM0KS5jY3YodmFsdWUpLm1pZGkoJ3RvdXQnKTsKfSk7CgpyZWdpc3RlcignZm10aW1lJywgKHN0YXJ0LGxlbmd0aCwgcGF0KSA9PiB7CiAgbGV0IG1vZHUgPSB0aW1lLm1vZChsZW5ndGgpLmFkZChzdGFydCkKICByZXR1cm4gcGF0LmZtKG1vZHUpLmZtaChtb2R1KQp9KQoKd2luZG93LmlyYW5kbyA9IChpcGF0KSA9PiByZWlmeShpcGF0KS5mbWFwKF9pcmFuZCkub3V0ZXJKb2luKCkKCndpbmRvdy5yYW5kbSA9IChkaXZpc2lvbikgPT4gaXJhbmQoZGl2aXNpb24pLmRpdigxNikKd2luZG93LnBrID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHsKICBjb25zdCBjb250cm9sID0gYXJncy5sZW5ndGggPiAyID8gYXJncy5wb3AoKSA6IDAKICByZXR1cm4gcGljayhhcmdzLCBjb250cm9sKQp9CgoKcmVnaXN0ZXIoJ2FjaWQnLCAocGF0KSA9PiB7CiAgcmV0dXJuIHBhdC5zKCdzdXBlcnNhdycpCiAgICAuZGV0dW5lKC41KQogICAgLnVuaXNvbigxKQogICAgLmxwZigxMDApCiAgICAubHBzdXN0YWluKDAuMikubHBkKC4yKS5scGVudigyKQogICAgLmxwcSgxMikKfSkKCi8vc3RleHQKLy90cmFuc2Zvcm0gdGV4dCBpbnB1dCBpbnRvIHN5bnRoZXNpcyEKcmVnaXN0ZXIoJ3N0eHQnLCAodGV4dCwgcGF0KSA9PiB7CiAgY29uc3QgUkFOR0UgPSAncmFuZ2UnCiAgY29uc3QgU0VMRUNUSU9OID0gJ3NlbGVjdGlvbicKCiAgY29uc3QgcGFyYW1zID0gewogICAgbHBmOiB7CiAgICAgIHR5cGU6IFJBTkdFLAogICAgICB2YWw6IFsxMDAsIDMwMDBdCiAgICB9LAogICAgcm9vbTogewogICAgICB0eXBlOiBSQU5HRSwKICAgICAgdmFsOiBbMCwgMV0KICAgIH0sCiAgICB2aWI6IHsKICAgICAgdHlwZTogUkFOR0UsCiAgICAgIHZhbDogWzAsIDE2XQogICAgfSwKICAgIHZpYm1vZDogewogICAgICB0eXBlOiBSQU5HRSwKICAgICAgdmFsOiBbMCwgLjNdCiAgICB9LAogICAgd3Q6IHsKICAgICAgdHlwZTogUkFOR0UsCiAgICAgIHZhbDogWzAsIDFdCiAgICB9LAogICAgbm90ZTogewogICAgICB0eXBlOiBSQU5HRSwKICAgICAgdHJhbnNmb3JtOiB4ID0%2BIE1hdGgucm91bmQoeCksCiAgICAgIHZhbDogWy0xMiwgOF0KICAgIH0sCgogICAgd3RyYXRlOiB7CiAgICAgIHR5cGU6IFJBTkdFLAogICAgICB2YWw6IFswLCAzXQogICAgfSwKICAgIHd0ZGVwdGg6IHsKICAgICAgdHlwZTogUkFOR0UsCiAgICAgIHZhbDogWzAsIDFdCiAgICB9LAoKICAgIGRlbGF5OiB7CiAgICAgIHR5cGU6IFJBTkdFLAogICAgICB2YWw6IFswLCAxXQogICAgfSwKCgogICAgZGVsYXl0aW1lOiB7CiAgICAgIHR5cGU6IFJBTkdFLAogICAgICB2YWw6IFswLCAuNjZdCiAgICB9LAoKCiAgICBkZWxheWZlZWRiYWNrOiB7CiAgICAgIHR5cGU6IFJBTkdFLAogICAgICB2YWw6IFswLCAuNl0KICAgIH0sCgogICAgZGVjYXk6IHsKICAgICAgdHlwZTogUkFOR0UsCiAgICAgIHZhbDogWy4xLCAxXQogICAgfSwKCiAgICBhdHRhY2s6IHsKICAgICAgdHlwZTogUkFOR0UsCiAgICAgIHZhbDogWzAsIC4xXQogICAgfSwKCiAgICB3dHJhdGU6IHsKICAgICAgdHlwZTogUkFOR0UsCiAgICAgIHZhbDogWzAsIDVdCiAgICB9LAoKICAgIGxwZW52OiB7CiAgICAgIHR5cGU6IFJBTkdFLAogICAgICB2YWw6IFswLCA4XQogICAgfSwKCiAgICBscGQ6IHsKICAgICAgdHlwZTogUkFOR0UsCiAgICAgIHZhbDogWzAsIDFdCiAgICB9LAoKICAgIGxwYTogewogICAgICB0eXBlOiBSQU5HRSwKICAgICAgdmFsOiBbMCwgLjVdCiAgICB9LAoKICAgIGRldHVuZTogewogICAgICB0eXBlOiBSQU5HRSwKICAgICAgdmFsOiBbMCwgLjhdCiAgICB9LAoKCgogICAgLy8gcGVudjogewogICAgLy8gICB0eXBlOiBSQU5HRSwKICAgIC8vICAgdHJhbnNmb3JtOiB4ID0%2BIE1hdGgucm91bmQoeCksCiAgICAvLyAgIHZhbDogWzAsIDQ4XQogICAgLy8gfSwKICAgIC8vIHBkZWM6IHsKICAgIC8vICAgdHlwZTogUkFOR0UsCiAgICAvLyAgIHZhbDogWzAsIC4xXQogICAgLy8gfSwKCgogICAgczogewogICAgICB0eXBlOiBTRUxFQ1RJT04sCiAgICAgIHZhbDogWwogICAgICAgICdzYXd0b290aCcsCiAgICAgICAgJ3N1cGVyc2F3JywKICAgICAgICAnd3RfZGlnaXRhbCcsCiAgICAgICAgJ3d0X2RpZ2l0YWxfYmFkX2RheScsCiAgICAgICAgJ3d0X2RpZ2l0YWxfYmFzaXF1ZScsCiAgICAgICAgJ3d0X2RpZ2l0YWxfZWNob2VzJywKICAgICAgICAnc2luZScsCiAgICAgICAgJ3RyaWFuZ2xlJywKICAgICAgICAncHVsc2UnCiAgICAgIF0KICAgIH0KICB9OwogIC8vIEVuY29kZSB0aGUgdGV4dCBpbnRvIGEgVWludDhBcnJheSBvZiBVVEYtOCBieXRlcwogIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoJ3V0Zi04Jyk7CiAgY29uc3QgdXRmOEJ5dGVzID0gZW5jb2Rlci5lbmNvZGUodGV4dCk7CgogIC8vIENvbnZlcnQgZWFjaCBieXRlIHRvIGEgdHdvLWRpZ2l0IGhleGFkZWNpbWFsIHN0cmluZyBhbmQgam9pbiB0aGVtCiAgY29uc3QgYnl0ZUFycmF5ID0gQXJyYXkuZnJvbSh1dGY4Qnl0ZXMpCgoKICBjb25zdCBieXRlU2l6ZSA9IDI1NQogIGxldCBhY2MgPSAwCiAgT2JqZWN0LmtleXMocGFyYW1zKS5mb3JFYWNoKChwLCBpKSA9PiB7CiAgICBjb25zdCB7IHR5cGUsIHRyYW5zZm9ybSA9ICh4KSA9PiB4LCB2YWwgfSA9IHBhcmFtc1twXQoKICAgIGxldCBieXRlVmFsID0gYnl0ZUFycmF5W2kgJSBieXRlQXJyYXkubGVuZ3RoXTsKICAgIGFjYyArPSBieXRlVmFsCiAgICBieXRlVmFsID0gW2J5dGVWYWwgKyBhY2NdICUgYnl0ZVNpemUKCiAgICBpZiAodHlwZSA9PT0gU0VMRUNUSU9OKSB7CgogICAgICBwYXQgPSBwYXRbcF0odHJhbnNmb3JtKHZhbFtieXRlVmFsICUgdmFsLmxlbmd0aF0pKQoKCiAgICB9IGVsc2UgewogICAgICBjb25zdCBtaW4gPSB2YWwuYXQoMCkKICAgICAgY29uc3QgbWF4ID0gdmFsLmF0KC0xKQogICAgICBjb25zdCBwVG90YWwgPSBtYXggLSBtaW4KICAgICAgY29uc3QgdmFsQWRqdXN0ZWQgPSAoKHBUb3RhbCAvIGJ5dGVTaXplKSAqIGJ5dGVWYWwpICsgbWluCgogICAgICBwYXQgPSBwYXRbcF0odHJhbnNmb3JtKHZhbEFkanVzdGVkKSkKCiAgICB9CiAgfSkKCiAgcmV0dXJuIHBhdAp9KQoKLyogT2xkc2Nob29sIHRpbWVzdHJldGNoaW5nIGZ1bmN0aW9uIApAZXhhbXBsZQokOiBzKCJicmsiKS5zZigyKQoqLwpyZWdpc3Rlcignc2YnLCAoY3ljbGVzLHgpID0%2BIHsKICBjb25zdCBzZWdtZW50cyA9IDE2OwogIGN5Y2xlcyA9IHJlaWZ5KGN5Y2xlcykKICByZXR1cm4geC5zY3J1YihzYXcuc2VnKGN5Y2xlcy5tdWwoc2VnbWVudHMpKS5zbG93KGN5Y2xlcykpCn0pCgovKiBzd2FwIG9uZSB2YWx1ZSB3aXRoIGFub3RoZXIKQGV4YW1wbGUKIHMoImJkIGJkIHNkIGJkIi5mYXN0KDQpLnN3YXAoImJkIiwgIjxsdCBiZDozPiIpLnN3YXAoInNkIiwgImhoIHNkOjIiKSkKICovCnJlZ2lzdGVyKCdzd2FwJywgKGZpbmQsIHJlcCwgeCkgPT4gewogIHJldHVybiB4LndpdGhWYWx1ZSh2ID0%2BIHsKICAgIGlmICh2ID09PSBmaW5kKSB7CiAgICAgIHJldHVybiByZXAKICAgIH0KICAgIHJldHVybiB2CiAgfSkKfSkKCi8qCkBleGFtcGxlCiQ6IHMoInBpYW5vIikub3ZlcigKICBuKCI8MCAzIDIgMSA1Pio4IiksCiAgbigiPC01IC0yIC0zIC00IDA%2BKjIiKQopLnNjYWxlKCJnOm1ham9yOnBlbnRhdG9uaWMiKQoqLwpQYXR0ZXJuLnByb3RvdHlwZS5vdmVyID0gZnVuY3Rpb24oLi4uaW5wKSB7CiAgcmV0dXJuIHRoaXMuc2V0Lm91dChzdGFjayguLi5pbnApKQp9CgpQYXR0ZXJuLnByb3RvdHlwZS5vdmVyaW4gPSBmdW5jdGlvbiguLi5pbnApIHsKICByZXR1cm4gdGhpcy5zZXQuaW4oc3RhY2soLi4uaW5wKSkKfQoKd2luZG93LnNiID0gcmVnaXN0ZXIoJ3NiJywgKHAsIGNiLCBwYXQpID0%2BIHsKIHJldHVybiBwYXQuc29tZXRpbWVzQnkocCwgY2IpOwp9KQoKCndpbmRvdy5TQ0FMRSA9ICdlOm1pbm9yJwoKd2luZG93LnNldFNjYWxlID0gKHNjKSA9PiB7CiAgd2luZG93LlNDQUxFID0gc2MKfQoKcmVnaXN0ZXIoJ3NjJywgKHBhdCkgPT4gewogICByZXR1cm4gcGF0LnNjYWxlKHdpbmRvdy5TQ0FMRSkKfSkKCnJlZ2lzdGVyKCdpZml0JywgKGN5Y2xlcywgcGF0KSA9PiB7CiAgcmV0dXJuIHBhdC5pbnNpZGUoY3ljbGVzLGZpdCkKfSkKCgovLyBFYXN5IGFycGVnZ2lhdGluZwovKgpAZXhhbXBsZQokOiBuKHRyYW5jZWFycCgiPDA6Mjo2QDMgMjo0Ojg%2BIiwgIkZANSBCQDMiLCAiPDEgMSAxQDIgMSAxQDIgMT4qMTYiKSkKICAuYWNpZGVudih0cmFuY2VhcnAoIi40Oi41Oi43IiwgIkYgQiIsICI8MSEzIDFAMyAxITI%2BKjE2IikpCiAgLnNjYWxlKCJnOm1pbm9yIikuZGVsYXkoLjYp4omlCiAgLnMoInNhd3Rvb3RoIikKKi8Kd2luZG93LnRyYW5jZWFycCA9IGZ1bmN0aW9uKG5vdGVzLHJzdCA9IDAgLHJ5dG0gPSAwKSB7CiAgY29uc3QgcnN0UHJlc2V0cyA9IFsKICAgICJGIiwKICAgICJCIiwKICAgICJGIEIgRiBCIiwKICAgICJGQDMgQkAzIEYgRiIsCiAgICAiRkAxMiBGQDIgRkAyIiwKICBdCiAgY29uc3Qgcnl0bVByZXNldHMgPSBbCiAgICAieCExNiIsCiAgICAiPDEgMUAyIDEgMUAyIDEgMUAyIDEgMUAyIDEgMSAxIDE%2BKjE2IiwKICAgICI8MSAxIF8gMSAxIDEgMSAxPioxNiIKICAgIAogIF0KICAKICBpZiAodHlwZW9mIHJzdCA9PSAnbnVtYmVyJykgewogICAgcnN0ID0gcGlja21vZChyc3RQcmVzZXRzLCByc3QpCiAgfQogIGlmICh0eXBlb2Ygcnl0bSA9PSAnbnVtYmVyJykgewogICAgcnl0bSA9IHBpY2ttb2Qocnl0bVByZXNldHMsIHJ5dG0pCiAgfQogIGNvbnN0IHBhdHMgPSB7CiAgICBGOiAiPDAgMSAyIDMgNCA1IDYgNyA4IDkgMTAgMTEgMTIgMTMgMTQgMTU%2BKjE2IiwKICAgIEI6ICI8MTUgMTQgMTMgMTIgMTEgMTAgOSA4IDcgNiA1IDQgMyAyIDEgMD4qMTYiCiAgICAvLyBGOiBzYXcubW9kKDE2KS5tdWwoMTYpLAogICAgLy8gQjogaXNhdy5tb2QoMTYpLm11bCgxNiksCiAgfQogIAogIHJldHVybiBwaWNrbW9kKG5vdGVzLCBwaWNrUmVzdGFydChwYXRzLCByc3QpKS5zdHJ1Y3Qocnl0bSkKICAvLyAucmVzdGFydChyc3QpCn0KCgovL0ZYCgp3aW5kb3cuX2NvbWIgPSByZWdpc3RlcignY29tYicsIChpbnAsIHBhdCkgPT4gewogIGxldCBbZGVsYXksIGZlZWRiYWNrID0gLjZdID0gW2lucF0uZmxhdCgpCiAgZGVsYXkgPSByZWlmeShkZWxheSkuZGl2KDEwMCkKICAKICByZXR1cm4gcGF0LkZYKEsoKCkgPT4gewogICAgY29uc3QgZCA9IFMoZGVsYXkpOwogICAgY29uc3QgcSA9IFMoZmVlZGJhY2spOwogICAgcmV0dXJuIGF1ZGlvaW4oKQogICAgICAuYWRkKHggPT4geC5kZWxheShkKS5tdWwocSkpCiAgICAgIC5hZGQoeCA9PiB4LmRlbGF5KDIgKiBkKS5tdWwocSAqIHEpKQogICAgICAuYWRkKHggPT4geC5kZWxheSgzICogZCkubXVsKHEgKiBxICogcSkpCiAgICAgIC5hZGQoeCA9PiB4LmRlbGF5KDQgKiBkKS5tdWwocSAqIHEgKiBxICogcSkpCiAgICAgIC5vdXQoKTsKICB9KSkuZnhyKDEpCn0pOwoKLy8gU09VTkRTCgoKcmVnaXN0ZXJGdW5jKCdub2lzZWhhdCcsIChzZWcgPSAxNiwgbW9kdSA9IHRyaSwgc3BlZWQgPSA0LCBtaW4gPSAuMDUsIG1heCA9IC4xMikgPT4gcygnd2hpdGUnKS5zZWcoc2VnKS5kZWMobW9kdS5mYXN0KDQpLnJhbmdlKG1pbixtYXgpKSkKcmVnaXN0ZXJGdW5jKCd6YXAnLCAoYW1vdW50ID0gLjgsIHNwZWVkID0gLjEsbm90ZSA9ICdjMycsICkgPT4gcygic2luZSIpLnBlbnYocmVpZnkoYW1vdW50KS5tdWwoMTIwKSkubm90ZShub3RlKS5wZGVjKHNwZWVkKS5kZWMoc3BlZWQpLm8oOCkpCndpbmRvdy5yb2xsZXIgPSAod3QgPSAwKSA9PiBzKCJ3dF9kaWdpIikKICAud3Qod3QpLnd0ZW52KDApLnd0ZGVjYXkoLjIpLndhcnAoMCkud2FycG1vZGUoNykud2FycGVudiguNSkud2FycGRlYyguMSkKICAuZGVjKC4yKS5scHEoMCkuZGx5KC44KS5yb29tKC43KS5yb29tc2l6ZSg0KS5kaW9kZSgiMSIpLmFjaWRlbnYoLjQ0KQoKLy9USEFOS1MgR0xPU1NJTkcKd2luZG93LnNwaW5vciA9IChhbGl2ZSA9IDEsIGRlYWQgPSAwKSA9PiBzKCJ3dF9kaWdpdGFsIikubGZvKHsgZHI6IDAuMDUgfSkKICAud3RyYXRlKGFsaXZlKS51bmlzb24oMykuZGV0dW5lKGFsaXZlKS5jb21wcmVzc29yKC0yMCkKICAuZm0oZGVhZCkuZm1oKDQpCiAgLkZYKGxwZigyMDApLmxwZSg0KS5scGEoMC41KS5scHMoMSkuSygoKSA9PiB7CiAgICBhdWRpb2luKCkuc3ViKHggPT4geC5icGYoc2luZSgwLjEzKS5tdWwoUyhyYW5kKSkpKS5vdXQoKQogIH0pLmFzeW0oIjAuMyIubXVsKGRlYWQpKSwgZGlvZGUoMC43KSwgZ2FpbigwLjMpKS5meHIoMSkKCgp3aW5kb3cucm9sbGVyMiA9IChhY2lkZW52ID0gLjUpID0%2BIHsKICByZXR1cm4gcygiYnN0YWI6MTouNixzdXBlcnNhdzoxOi42LHdoaXRlOjA6LjMiKS5kZXR1bmUocmFuZCkKICAgIC5iZWdpbigiPDAgLjAyPi80Iikucm9vbSguNSkuYWNpZGVudihhY2lkZW52KS5scHEoMCkucG9zdGdhaW4oMS4yKS5kaW9kZShbMi41LC42XSkKICAuc3VzdGFpbiguNDUpLmRlYyguMikKfQoKLy8gR0xPU1NJTkcgRlVOQ1RJT05TIDwzIHRoZXNlIGFyZSBwdWxsZWQgZnJvbSBHbG9zc2luZydzIHJlcG86IAovLyBodHRwczovL2NvZGViZXJnLm9yZy9nbG9zc2luZy9TdHJ1ZGVsX1NjcmlwdHMKCgovKiBTaW1pbGFyIHRvIHNldC5taXggYnV0IHdvbid0IHdyaXRlIG92ZXIgdmFsdWVzIHRoYXQgYHZhbHNgIGRvZXMgbm90IGNvbnRhaW4uCiAgVGhpcyBsZXRzIHlvdSBkbyB0aGluZ3MgbGlrZQoKICAkOiBzKCJiZCIpLm4oNSkucm9vbSgwLjEpLnJscCgxODAwKS51cChgPAogICAgMSAwLjUgfiAwLjc6NAogICAgMSAwLjUgfiB%2BCiAgICAxIDAuNSB%2BIFswLjQ6NCAwLjY6NF0KICAgIDEgMC41IDE6MjI6c2Q6MSB%2BCiAgPio4YC5hcygidmVsb2NpdHk6bjpzOnJvb20iKSkKCiAgdG8gZG8gRWxla3Ryb24tc3R5bGUgcGFyYW1ldGVyIGxvY2tzICsrIHNldCB0aGUgcmh5dGhtIG9mIGFuIGVsZW1lbnQgKHNpbWlsYXIgdG8gYHN0cnVjdGApCiAgYXQgdGhlIHNhbWUgdGltZQoqLwp3aW5kb3cudXAgPSByZWdpc3RlcigKICAndXAnLAogICh2YWxzLCBwYXQpID0%2BCiAgICBwYXQKICAgICAgLndpdGhWYWx1ZSgKICAgICAgICAodikgPT4gKHZOZXcpID0%2BIHsKICAgICAgICAgIGNvbnN0IHZVcCA9IE9iamVjdC5mcm9tRW50cmllcygKICAgICAgICAgICAgT2JqZWN0LmVudHJpZXModk5ldykuZmlsdGVyKChbXywgdmFsXSkgPT4gdmFsICE9PSB1bmRlZmluZWQpCiAgICAgICAgICApOwogICAgICAgICAgcmV0dXJuIHsgLi4udiwgLi4udlVwIH07CiAgICAgICAgfSAKICAgICAgKQogICAgICAuYXBwQm90aCh2YWxzKSwKICBmYWxzZSwKKTsKCi8qIFBsYXlzIGEgc291bmQgb25jZSAod2hlbiB0aGUgUkVQTCBpcyB1cGRhdGVkKSBidXQgbG9ja2VkIHRvIGEgcHJvdmlkZWQgZ3JpZC9xdWFudGl6ZQoKU28gZG9pbmcKCnMoImRvd25saWZ0ZXIiKS5vbmVzaG90KDQpCgp3aWxsIHBsYXkgaXQsIGJ1dCBvbmx5IGF0IHRoZSBuZXh0IDQtZGl2aXNpYmxlIGN5Y2xlICh0ID0gMCwgNCwgOCwgZXRjKQpVc2VmdWwgZm9yIGxvY2tpbmcgaXQgaW50byByZWxldmFudCBwYXJ0cyBvZiB0aGUgYXJyYW5nZW1lbnQKCiovCnJlZ2lzdGVyKCdvbmVzaG90JywgKGdyaWQsIHBhdCkgPT4gewogIGNvbnN0IHQgPSBnZXRUaW1lKCk7CiAgY29uc3QgcXQgPSBNYXRoLmNlaWwodCAvIGdyaWQpICogZ3JpZDsKICByZXR1cm4gcGF0LmZpbHRlcldoZW4oKHQpID0%2BIHQgPj0gcXQgJiYgdCA8IHF0ICsgMSk7Cn0pOwoKLyogRXhlY3V0ZXMgYSBmdW5jdGlvbiB3aGVuIGEgc3BlY2lmaWMgY29udHJvbCBrZXkgbWF0Y2hlcyBhIHNwZWNpZmljIHZhbHVlLiBGb3IgZXhhbXBsZQoKJDogcygiYmQgaGggc2QgaGgiKS5maWx0dmFsKCJzIiwgImJkIiwgeCA9PiB4LmR1Y2soMikpCgpUbyBvbmx5IGhhdmUgdGhlIGtpY2tzIHRyaWdnZXIgdGhlIHNpZGVjaGFpbgoKKi8KcmVnaXN0ZXIoJ2ZpbHR2YWwnLCAoa2V5LCB2YWwsIGZ1bmMsIHBhdCkgPT4gewogIHJldHVybiBwYXQud2hlbigKICAgIHBhdC5mbWFwKCh2KSA9PiB2W2tleV0gPT09IHZhbCksCiAgICBmdW5jLAogICk7Cn0pOwoKLyogUG9seXBob25pYyBub24tbGVnYXRvIGdsaWRlCgpUaGlzIGFsc28gaGFzIHRoZSBuaWNlIGZlYXR1cmUgb2YgZ2xpZGUgcGVyc2lzdGluZyBhY3Jvc3Mgbm90ZXMsIHNvIGlmIHlvdSBoYXZlIGEgdmVyeSBsb25nIGdsaWRlCml0J2xsIGFjdHVhbGx5IHNsb3dseSBkcmlmdCBiZXR3ZWVuIHRob3NlIHRhcmdldHMgcmF0aGVyIHRoYW4gc3RhcnRpbmcgaXRzIGdsaWRlIG92ZXIgb24KZXZlcnkgbmV3IG5vdGUKCiovCnJlZ2lzdGVyKAogICdnbGlkZScsCiAgKHRpbWUsIHBhdCkgPT4gewogICAgbGV0IGN1cnIgPSBbXSwKICAgICAgcHJldiA9IFtdLAogICAgICBsYXN0VCA9IG51bGw7CiAgICBjb25zdCBxdWVyeSA9IChzdGF0ZSkgPT4gewogICAgICBjb25zdCB0cmlnID0gISFzdGF0ZS5jb250cm9scy5fY3BzOyAvLyBhbiBhY3R1YWwgdHJpZ2dlciBhcyBvcHBvc2VkIHRvIGxvb2thaGVhZAogICAgICBjb25zdCBoYXBzID0gcGF0LnF1ZXJ5KHN0YXRlKTsKICAgICAgY29uc3Qgb3V0cHV0ID0gW107CiAgICAgIGhhcHMubWFwKChoYXApID0%2BIHsKICAgICAgICBjb25zdCB7IHZhbHVlLCB3aG9sZSB9ID0gaGFwOwogICAgICAgIGNvbnN0IHQgPSBOdW1iZXIod2hvbGUuYmVnaW4pOwogICAgICAgIGlmICh0cmlnICYmIChsYXN0VCA9PSBudWxsIHx8IGxhc3RUICE9PSB0KSkgewogICAgICAgICAgcHJldiA9IGN1cnI7CiAgICAgICAgICBjdXJyID0gW107CiAgICAgICAgICBsYXN0VCA9IHQ7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGdsaWRlSGFwcyA9IHRpbWUucXVlcnkoc3RhdGUuc2V0U3BhbihoYXAud2hvbGVPclBhcnQoKSkpOwogICAgICAgIGdsaWRlSGFwcy5tYXAoKGdsaWRlSGFwKSA9PiB7CiAgICAgICAgICBjb25zdCBwYXJ0ID0gaGFwLnBhcnQuaW50ZXJzZWN0aW9uKGdsaWRlSGFwLnBhcnQpOwogICAgICAgICAgaWYgKCFwYXJ0KSByZXR1cm47CiAgICAgICAgICBjb25zdCBjb250ZXh0ID0gaGFwLmNvbWJpbmVDb250ZXh0KGdsaWRlSGFwKTsKICAgICAgICAgIGNvbnN0IGdsaWRlVCA9IGdsaWRlSGFwLnZhbHVlOwogICAgICAgICAgY29uc3QgZnJlcUYgPSBnZXRGcmVxdWVuY3lGcm9tVmFsdWUodmFsdWUsIHZhbHVlLnMgPT09ICdzYmQnID8gMjkgOiAzNik7IC8vIHRhcmdldAogICAgICAgICAgY29uc3QgZnJlcUkgPSBwcmV2Lmxlbmd0aAogICAgICAgICAgICA%2FIHByZXYucmVkdWNlKChjbG9zZXN0LCB2KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBwaGFzZSA9IGdsaWRlVCA%2BIDAgPyBNYXRoLm1pbigodCAtIHYudCkgLyBnbGlkZVQsIDEpIDogMTsKICAgICAgICAgICAgICAgIGNvbnN0IGNhbmQgPSB2LmZyZXFJICsgcGhhc2UgKiAodi5mcmVxRiAtIHYuZnJlcUkpOwogICAgICAgICAgICAgICAgaWYgKGNsb3Nlc3QgPT0gbnVsbCkgcmV0dXJuIGNhbmQ7CiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMoY2FuZCAtIGZyZXFGKSA8IE1hdGguYWJzKGNsb3Nlc3QgLSBmcmVxRikgPyBjYW5kIDogY2xvc2VzdDsKICAgICAgICAgICAgICB9LCBudWxsKQogICAgICAgICAgICA6IGZyZXFGOwogICAgICAgICAgaWYgKHRyaWcpIHsKICAgICAgICAgICAgY3Vyci5wdXNoKHsgZnJlcUksIGZyZXFGLCB0IH0pOwogICAgICAgICAgfQogICAgICAgICAgbGV0IG5ld1ZhbCA9IHZhbHVlOwogICAgICAgICAgaWYgKE1hdGguYWJzKGZyZXFGIC0gZnJlcUkpID4gMWUtNikgewogICAgICAgICAgICBuZXdWYWwgPSB7CiAgICAgICAgICAgICAgLi4udmFsdWUsCiAgICAgICAgICAgICAgcGFuY2hvcjogMCwKICAgICAgICAgICAgICBwc3VzdGFpbjogMCwKICAgICAgICAgICAgICBwYXR0YWNrOiAwLAogICAgICAgICAgICAgIHBkZWNheTogZ2xpZGVULAogICAgICAgICAgICAgIHBlbnY6IC0xMiAqIE1hdGgubG9nMihmcmVxRiAvIGZyZXFJKSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIG91dHB1dC5wdXNoKG5ldyBIYXAod2hvbGUsIHBhcnQsIG5ld1ZhbCwgY29udGV4dCkpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIG91dHB1dDsKICAgIH07CiAgICByZXR1cm4gbmV3IFBhdHRlcm4ocXVlcnkpOwogIH0sCiAgZmFsc2UsCik7CgovKiBUcnkgYWxsKHggPT4geC5nbGl0Y2gocmFuZCkpIHRvIGFic29sdXRlbHkgZGVzdHJveSB5b3VyIHBhdHRlcm5zIDpwIDwzCgpGdW4gdG8gdHJpZ2dlciBhdCB0aGUgZW5kIG9mIGJhcnMgZm9yIHdlaXJkIGdsaXRjaHkgZmlsbHMKCiovCnJlZ2lzdGVyKCdnbGl0Y2gnLCAoYW10LCBwYXQpID0%2BIHsKICByZXR1cm4gcGF0LmZtYXAoKHYpID0%2BIHsKICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh2KTsKICAgIGNvbnN0IG51bUtleXMgPSBrZXlzLmxlbmd0aDsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtS2V5czsgaSsrKSB7CiAgICAgIGNvbnN0IGsgPSBrZXlzW2ldOwogICAgICBpZiAoWydvcmJpdCcsICdkdWNrb3JiaXQnXS5pbmNsdWRlcyhrKSkgY29udGludWU7CiAgICAgIGNvbnN0IHJhbmQgPSAyICogTWF0aC5yYW5kb20oKSAtIDE7CiAgICAgIGNvbnN0IHZhbCA9IHZba107CiAgICAgIGNvbnN0IGlzTnVtYmVyID0gdHlwZW9mIHZhbCA9PT0gJ251bWJlcic7CiAgICAgIGlmIChrID09PSAnbm90ZScgJiYgIWlzTnVtYmVyKSB7CiAgICAgICAgY29uc3QgbWlkaSA9IG5vdGVUb01pZGkodmFsKTsKICAgICAgICB2W2tdID0gTWF0aC5yb3VuZChNYXRoLm1heChtaWRpICogKDEgKyBhbXQgKiAwLjUgKiBNYXRoLnJhbmRvbSgpKSwgMjQpKTsKICAgICAgfSBlbHNlIGlmIChpc051bWJlcikgewogICAgICAgIHZba10gKj0gMSArIHJhbmQgKiBhbXQ7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB2OwogIH0pOwp9KTsKCi8qIFNxdWFyZSDirJzvuI8uIFVzZWZ1bCBmb3IgbWFraW5nIGtub2JzIC8gc2xpZGVycyBmZWVsIHNtb290aGVyCiovCnJlZ2lzdGVyKCdzcScsIChwYXQpID0%2BIHBhdC5mbWFwKCh2KSA9PiB2ICogdikpOwoKLyogU3RydW1zIGNob3JkcwoKJDogcygiZ21fc2xhcF9iYXNzXzIiKQogIC5ub3RlKCJhMSxjMixlMyxnNCIpLmNsaXAoMC4xMjUpLmRlY2F5KDAuMikuZGVsYXkoMC4zKQogIC5zdHJ1bShzbGlkZXIoMC4wODQ5LCAwLCAwLjEpKS5fcGlhbm9yb2xsKCkKCiovCnJlZ2lzdGVyKCdzdHJ1bScsIChhbXQsIHBhdCkgPT4gewogIHJldHVybiBwYXQKICAgIC5jb2xsZWN0KCkKICAgIC53aXRoSGFwcygoaGFwcykgPT4gewogICAgICByZXR1cm4gZmxhdHRlbigKICAgICAgICBoYXBzLm1hcCgoaGFwKSA9PiB7CiAgICAgICAgICBjb25zdCBjb2xsZWN0ZWQgPSBoYXAudmFsdWU7CiAgICAgICAgICBpZiAoY29sbGVjdGVkLmxlbmd0aCA8PSAxKSB7CiAgICAgICAgICAgIHJldHVybiBncm91cDsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IGwgPSBjb2xsZWN0ZWQubGVuZ3RoIC0gMTsKICAgICAgICAgIHJldHVybiBjb2xsZWN0ZWQubWFwKChoYXAsIGlkeCkgPT4gewogICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBhbXQgKiAoMiAqIGlkeCAvIGwgLSAxKTsKICAgICAgICAgICAgcmV0dXJuIGhhcC53aXRoU3Bhbigoc3BhbikgPT4gc3Bhbi53aXRoVGltZSgodCkgPT4gdCArIG9mZnNldCkpOwogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgKTsKICAgIH0pOwp9KTsKCi8qIE1vdmVzIGhpdHMgb2ZmIHRoZSBncmlkIGFuZCBhZGRzIHZlbG9jaXR5IHZhcmlhdGlvbgoKJDogcygiYmQgaGggc2QgaGgiKS5odW1hbml6ZShzbGlkZXIoMC4wMzI4LCAwLCAxKSkKICAuYmFuaygidHI5MDkiKQogIC5fcGlhbm9yb2xsKCkKbWV0cm9ub21lOiBzKCJoaCo4Iikubig5KS5kZWMoMC4zKQoKKi8KcmVnaXN0ZXIoJ2h1bWFuaXplJywgKGFtdCwgcGF0KSA9PiB7CiAgY29uc3QgYW10QyA9IGNsYW1wKGFtdCwgMCwgMSk7CiAgcmV0dXJuIHBhdC53aXRoSGFwcygoaGFwcykgPT4gewogICAgcmV0dXJuIGhhcHMubWFwKChoYXApID0%2BIHsKICAgICAgY29uc3Qgb2Zmc2V0ID0gMC4xICogYW10QyAqICgyICogTWF0aC5yYW5kb20oKSAtIDEpOwogICAgICByZXR1cm4gaGFwLndpdGhTcGFuKChzcGFuKSA9PiBzcGFuLndpdGhUaW1lKHQgPT4gdCArIG9mZnNldCkpOwogICAgfSkKICB9KS53aXRoVmFsdWUoKHYpID0%2BICh7IC4uLnYsIHZlbG9jaXR5OiAodi52ZWxvY2l0eSA%2FPyAxKSArIDAuNSAqIGFtdEMgKiAoMiAqIE1hdGgucmFuZG9tKCkgLSAxKSB9KSk7Cn0pOwoKCi8qIFBpdGNoYmVuZCB5b3VyIHNvdW5kcyEgSW1wb3J0YW50bHksIHRoZSBiZW5kaW5nIChgYmVuZHNgKSBwYXR0ZXJuIGNhbiBoYXZlIGV2ZW50cwpvY2N1cnJpbmcgX2JldHdlZW5fIGV2ZW50cyBvZiB0aGUgbWFpbiBwYXR0ZXJuLCB3aGljaCBkaXN0aW5ndWlzaGVzIGl0IGZyb20gdGhlIG5vcm1hbApwaXRjaCBiZW5kIChgcGVudmApLgoKQGV4YW1wbGUKJDogcygic3VwZXJzYXciKS5kZXR1bmUoMC40KS5yb29tKDAuNCkubm90ZSgiRjEiKQogIC5iZW5kKCI8MCAyIDEyQDIgMjQgMCA3IDM2PioxNiIsICIwIDAuMyIsICIwLjMgMCIpCiovCmNvbnN0IF9fc2VtaXRvbmVCZW5kID0gTWF0aC5wb3coMiwgMSAvIDEyKTsKUGF0dGVybi5wcm90b3R5cGUuYmVuZCA9IGZ1bmN0aW9uIChiZW5kcyA9IDAsIHNwZWVkVXAgPSAwLjA1LCBzcGVlZERvd24gPSAwLjA1KSB7CiAgd2luZG93Ll9fbGVnYXRvQnVzSUQgPz89IDA7CiAgY29uc3QgdXVpZCA9IHdpbmRvdy5fX2xlZ2F0b0J1c0lEKys7CiAgYmVuZHMgPSByZWlmeShiZW5kcyk7CiAgc3BlZWRVcCA9IHJlaWZ5KHNwZWVkVXApOwogIHNwZWVkRG93biA9IHJlaWZ5KHNwZWVkRG93bik7CiAgLy8gQ3JlYXRlIHRoZSBiZW5kaW5nIHBhdHRlcm4gYW5kIG1ha2UgaXQgcGxheSBieSB0YWdnaW5nIGl0IHdpdGggYHBgCiAgYmVuZHMuZm1hcCgoYikgPT4gKHN1KSA9PiAoc2QpID0%2BICh7CiAgICAgIHM6ICdvbmUnLAogICAgICBhdHRhY2s6IHN1LAogICAgICByZWxlYXNlOiBzZCwKICAgICAgYnVzOiB1dWlkLAogICAgICBzdXN0YWluOiAxLAogICAgICBkcnk6IDAsCiAgICAgIGdhaW46IF9fc2VtaXRvbmVCZW5kICoqIGIgLSAxLAogICAgICBkYzogMCwKICAgIH0pKS5hcHBCb3RoKHNwZWVkVXApLmFwcEJvdGgoc3BlZWREb3duKQogICAgLnAoJ2JlbmRfJyArIHV1aWQpOwogIC8vIE1vZHVsYXRlIHRoZSBvcmlnaW5hbCBwYXR0ZXJuCiAgcmV0dXJuIHRoaXMuYm1vZCh7IGM6ICdzJywgYjogdXVpZCwgZHI6IDEgfSk7Cn0KCgpmZXRjaCgnaHR0cHM6Ly9naXRodWIuY29tL3N3aXRjaGFuZ2VsL3N0cnVkZWwtc2NyaXB0cy9ibG9iL21haW4vcHJlYmFrZS5zdHJ1ZGVsJykKCmNvbnN0IGRiYW5rID0gInRyOTA5IgpsZXQgYSA9IHNsaWRlcigxLCAxLjAsIDIuNSkKbGV0IGIgPSBzbGlkZXIoMTYwMDAsIDgwMCwgMTYwMDApCmxldCBjID0gc2xpZGVyKDAsIDAsIDEpICAgICAgLy8gYmFzcyBkZW5zaXR5OiAwID0gZnVsbCBraWNrcywgMSA9IHNwYXJzZSBraWNrcwpsZXQgZCA9IHNsaWRlcigxLCAwLCAxKQoKCmxldCBpbnYgPSBzdWIoMSwgYS5tdWwoMC41KSkgCnNldENwcygxNDAvNjAvNCkKCnN0YWNrKAogc3RhY2soCiAgcygiaGgqMTYiKQogIC5iYW5rKGRiYW5rKQogIC5nYWluKHBlcmxpbi5mYXN0KDIpLnJhbmdlKDAuMiwgMC41KSkKICAucGFuKHNpbmUuZmFzdCgzKS5yYW5nZSgtMC40LCAwLjQpKQogIC5kZWNheShzaW5lLmZhc3QoMikucmFuZ2UoMC4wMywgMC4xMikpCiAgLmV2ZXJ5KDQsIHggPT4geC5mYXN0KDEuNSkpLAoKICBzKCJvaDowIH4gfiBvaDowIH4gfiBvaDowIH4iLmZhc3QoMikpCiAgLmJhbmsoZGJhbmspCiAgLmdhaW4oLjM1KQogIC5kZWNheSgwLjE4KQogIC5zb21ldGltZXNCeSgwLjE1LCB4ID0%2BIHguc3BlZWQoIjAuOCB8IDEuMiIpKSwKCiAgcygid2hpdGUhMTYiKQogIC5kZWNheShzaW5lLmZhc3QoNikucmFuZ2UoMC4wMiwgMC4xOCkpCiAgLmdhaW4oLjMpCiAgLmhwZihwZXJsaW4uZmFzdCgxLjUpLnJhbmdlKDIwMDAsIDgwMDApKQogIC5zb21ldGltZXNCeSguMTIsIHggPT4geC5wbHkoIjIgfCA4IikpLAoKICBzdGFjaygKICAgIHMoImJkITE2IikKICAgIC5kZWdyYWRlQnkoYykgICAgICAgCiAgICAucmliYm9uKDMyLCAyKQogICAgLmJhbmsoZGJhbmspCiAgICAubihpcmFuZCgzKS5yaWJib24oMTUwLCAyKSkKICAgIC5zcGVlZChwZXJsaW4uZmFzdCgwLjUpLnJhbmdlKDAuOSwgMS4xKSkKICAgIC5ldmVyeSg4LCB4ID0%2BIHguYmVhdCgiMCwyLDMsNSwxMCwxNCIsIDE2KSkKICAgIC5iZWF0KCIwLDQsOCwxMSIsIDE2KSwKCiAgICBzKCJzZCIpCiAgICAuYmFuayhkYmFuaykKICAgIC5iZWF0KCI0LDEyIiwgMTYpCiAgKQogIC5kaXN0KGEpCiAgLmdhaW4oaW52LnJhbmdlKDAuNCwgMC45KSksCgogIHMoInNkOjEhMTY%2FIikKICAuZGVncmFkZUJ5KDAuNzgpCiAgLmJhbmsoZGJhbmspCiAgLmdhaW4ocGVybGluLmZhc3QoNCkucmFuZ2UoMC4xNSwgMC4zNSkpCiAgLnNwZWVkKCIwLjcgfCAwLjg1IHwgMS4xIikKICAucmliYm9uKDI0LCAzKSwKCiAgcygiY3A6MiExNj8iKQogIC5yaWJib24oMjAsIDIpCiAgLmJhbmsoZGJhbmspCiAgLmdhaW4oLjI1KQogIC5kZWxheSgiLjIgfCAuMyIpCiAgLmRlbGF5dGltZSgiMC4wNCB8IDAuMDciKQogIC5kZWxheWZlZWRiYWNrKDAuMikKCiApLnB1bmNoY2FyZCgpCiAubHBmKGIpLAoKIHN0YWNrKAogICBuKCJbMSA8NSA0PiAzIDcgPDQgNT5dKjIiKS5zY2FsZSgiYzptYWpvciIpLnNvdW5kKCJzcXVhcmUiKS5kaXN0KDAuNSkubHBmKCI8MTAwMCAyNTAwIDUwMDA%2BIikuZGVsYXkoMC40KS5hY2lkZW52KGQpLmdhaW4oMC40KSwKICAgY2hvcmQoIjxDIEcgRCBEPiIpLnZvaWNpbmcoKS5zb3VuZCgic2F3IikubHBmKDIwMDApLmdhaW4oMC4zNSkKICkKKQoK) | [Github file](https://github.com/maiasullivan/strudel_sounds/blob/main/breakcore_attempt_1.str) |